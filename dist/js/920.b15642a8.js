"use strict";(self["webpackChunkpanel"]=self["webpackChunkpanel"]||[]).push([[920],{1920:function(e,t,a){a.r(t),a.d(t,{default:function(){return ve}});var o=a(641),s=a(3751),l=a(33);const r={class:"main-content"},i={class:"container-fluid"},c={class:"row justify-content-center"},d={class:"col-12 col-lg-10 col-xl-8"},n={class:"header mt-md-5"},p={class:"header-body"},u={class:"row align-items-center"},m={class:"col"},v={class:"nav nav-tabs nav-overflow header-tabs"},h={class:"nav-item"},k={class:"nav-item"},b={class:"mb-7 mt-5"},g={class:"row justify-content-between align-items-center"},L={class:"col-auto"},y=["src"],f={class:"row"},C={class:"col-12"},x={class:"form-group"},_={class:"col-12"},w={class:"form-group"},$={class:"col-12 col-md-6"},A={class:"form-group"},E={class:"col-12 col-md-6"},N={class:"form-group"},T={class:"col-12 col-md-6"},S={class:"form-group"},I={class:"col-12 col-md-12"},U={class:"form-group"},j={class:"row"},z={class:"col-12 col-md-6"},V={class:"form-group"},F={class:"row"},J={class:"col-auto"},P={class:"form-check form-switch"},B={class:"col-12 col-md-6"},O={class:"form-group"},R={class:"row"},X={class:"col-auto"},G={class:"form-check form-switch"},H={class:"row mb-5"},D={class:"col-lg-5"},M={class:"col-lg-5"},q={class:"col"},W={class:"card"},Q={class:"card-body"},K={class:"list-group list-group-flush my-n3"},Y={class:"list-group-item"},Z={class:"row align-items-center"},ee={class:"col"},te={class:"mb-1"},ae={class:"text-muted"},oe={class:"col"},se={class:"col-auto"},le=["onClick"],re={key:1,disabled:"",class:"btn btn-sm btn-danger",type:"button"};function ie(e,t,a,ie,ce,de){const ne=(0,o.g2)("sideBar"),pe=(0,o.g2)("topNav"),ue=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(ne),(0,o.Lk)("div",r,[(0,o.bF)(pe),(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",n,[(0,o.Lk)("div",p,[t[15]||(t[15]=(0,o.Lk)("div",{class:"row align-items-center"},[(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("h6",{class:"header-pretitle"},"Panel de administración"),(0,o.Lk)("h1",{class:"header-title"},"Editar producto")])],-1)),(0,o.Lk)("div",u,[(0,o.Lk)("div",m,[(0,o.Lk)("ul",v,[(0,o.Lk)("li",h,[(0,o.bF)(ue,{to:"/producto",class:"nav-link"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("Todos los productos ")]))),_:1})]),(0,o.Lk)("li",k,[(0,o.bF)(ue,{to:"/producto/crear",class:"nav-link"},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)(" Crear producto")]))),_:1})])])])])]),(0,o.Lk)("div",b,[(0,o.Lk)("div",g,[t[17]||(t[17]=(0,o.Fv)('<div class="col"><div class="row align-items-center"><div class="col-auto"><div class="avatar"><img class="avatar-img rounded-circle" src="/assets/img/icon-ropa.jpg" alt="..."></div></div><div class="col ms-n2"><h4 class="mb-1"><b>Selecciona la imagen de portada</b></h4><small class="text-muted"> Solo imagenes tipo PNG, JPG, JPEG o WEBP no mayor a 1mb. </small></div></div></div>',1)),(0,o.Lk)("div",L,[t[16]||(t[16]=(0,o.Lk)("label",{for:"file-upload",class:"btn btn-sm btn-primary"}," Cargar ",-1)),(0,o.Lk)("input",{style:{display:"none"},id:"file-upload",type:"file",onChange:t[0]||(t[0]=e=>de.uploadImage(e))},null,32)])]),(0,o.Lk)("img",{class:"upload-img rounded-circle",src:ce.str_img,alt:"..."},null,8,y),t[40]||(t[40]=(0,o.Lk)("hr",{class:"my-5"},null,-1)),(0,o.Lk)("div",f,[(0,o.Lk)("div",C,[(0,o.Lk)("div",x,[t[18]||(t[18]=(0,o.Lk)("label",{class:"mb-1"}," Nombre del producto",-1)),t[19]||(t[19]=(0,o.Lk)("small",{class:"form-text text-muted"}," El nombre debe ser descriptivo, claro y deberá incluir características clave. ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"Nombre del producto","onUpdate:modelValue":t[1]||(t[1]=e=>ce.producto.nombre=e)},null,512),[[s.Jo,ce.producto.nombre]])])]),(0,o.Lk)("div",_,[(0,o.Lk)("div",w,[t[20]||(t[20]=(0,o.Lk)("label",{class:"mb-1"}," Clave del producto",-1)),t[21]||(t[21]=(0,o.Lk)("small",{class:"form-text text-muted"}," La clave de producto es para una mejor logistica interna ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"Clave del producto","onUpdate:modelValue":t[2]||(t[2]=e=>ce.producto.clave=e)},null,512),[[s.Jo,ce.producto.clave]])])]),(0,o.Lk)("div",$,[(0,o.Lk)("div",A,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"}," Genero",-1)),(0,o.bo)((0,o.Lk)("select",{name:"",class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>ce.producto.genero=e)},t[22]||(t[22]=[(0,o.Lk)("option",{value:"",disabled:"",selected:""},"Seleccionar",-1),(0,o.Lk)("option",{value:"Mujer"},"Mujer",-1),(0,o.Lk)("option",{value:"Hombre"},"Hombre",-1)]),512),[[s.u1,ce.producto.genero]])])]),(0,o.Lk)("div",E,[(0,o.Lk)("div",N,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"}," Categoria ",-1)),(0,o.bo)((0,o.Lk)("select",{name:"",class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>ce.producto.categoria=e)},t[24]||(t[24]=[(0,o.Fv)('<option value="" disabled selected>Seleccionar</option><option value="Tops">Tops</option><option value="Jeans">Jeans</option><option value="Interior">Interior</option><option value="Basicos">Basicos</option><option value="Camisas">Camisas</option><option value="blusas">blusas</option><option value="Shorts">Shorts</option><option value="Sudaderas">Sudaderas</option><option value="Blazers y chalecos">Blazers y chalecos</option><option value="Chamarras y abrigos">Chamarras y abrigos</option><option value="Oversize">Oversize</option>',12)]),512),[[s.u1,ce.producto.categoria]])])]),(0,o.Lk)("div",T,[(0,o.Lk)("div",S,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"}," Precio ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",readonly:"",class:"form-control",placeholder:"Precio","onUpdate:modelValue":t[5]||(t[5]=e=>ce.producto.precio=e)},null,512),[[s.Jo,ce.producto.precio]])])]),(0,o.Lk)("div",I,[(0,o.Lk)("div",U,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"}," Descripción ",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"form-control",id:"",rows:"3",placeholder:"Descripción","onUpdate:modelValue":t[6]||(t[6]=e=>ce.producto.descripcion=e)},null,512),[[s.Jo,ce.producto.descripcion]])])])]),(0,o.Lk)("div",j,[(0,o.Lk)("div",z,[(0,o.Lk)("div",V,[t[30]||(t[30]=(0,o.Lk)("label",{class:"mb-1"}," Producto publicado ",-1)),t[31]||(t[31]=(0,o.Lk)("small",{class:"form-text text-muted"}," Marca el producto como publicado si al guardar quedara publico o desactivalo si quedara como borrador ",-1)),(0,o.Lk)("div",F,[(0,o.Lk)("div",J,[(0,o.Lk)("div",P,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"switchOne","onUpdate:modelValue":t[7]||(t[7]=e=>ce.producto.estado=e)},null,512),[[s.lH,ce.producto.estado]]),t[28]||(t[28]=(0,o.Lk)("label",{class:"form-check-label",for:"switchOne"},null,-1))])]),t[29]||(t[29]=(0,o.Lk)("div",{class:"col ms-n2"},[(0,o.Lk)("small",{class:"text-muted"}," Borrador activado ")],-1))])])]),(0,o.Lk)("div",B,[(0,o.Lk)("div",O,[t[34]||(t[34]=(0,o.Lk)("label",{class:"mb-1"}," En descuento ",-1)),t[35]||(t[35]=(0,o.Lk)("small",{class:"form-text text-muted"}," Habilida esta opcion si el producto si tendra descuento. ",-1)),(0,o.Lk)("div",R,[(0,o.Lk)("div",X,[(0,o.Lk)("div",G,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"switchTwo","onUpdate:modelValue":t[8]||(t[8]=e=>ce.producto.descuento=e)},null,512),[[s.lH,ce.producto.descuento]]),t[32]||(t[32]=(0,o.Lk)("label",{class:"form-check-label",for:"switchTwo"},null,-1))])]),t[33]||(t[33]=(0,o.Lk)("div",{class:"col ms-n2"},[(0,o.Lk)("small",{class:"text-muted"}," Descuento desactivado ")],-1))])])])]),t[41]||(t[41]=(0,o.Lk)("hr",{class:"mt-4 mb-5"},null,-1)),(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[9]||(t[9]=e=>de.validar())},"Guardar cambios"),t[42]||(t[42]=(0,o.Fv)('<hr class="mt-4 mb-5"><div class="row justify-content-between align-items-center mb-5"><div class="col-12"><h2 class="mb-2"> Variedades de producto </h2><p class="text-muted mb-xl-0"> Agrega el color y la talla para que posteriormente se le agrege el stock </p></div></div>',2)),(0,o.Lk)("div",H,[(0,o.Lk)("div",D,[t[36]||(t[36]=(0,o.Lk)("small",{class:"text-muted"}," Color ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"Agrega el color.","onUpdate:modelValue":t[10]||(t[10]=e=>ce.variedad.color=e)},null,512),[[s.Jo,ce.variedad.color]])]),(0,o.Lk)("div",M,[t[37]||(t[37]=(0,o.Lk)("small",{class:"text-muted"}," Talla ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"Agrega la talla.","onUpdate:modelValue":t[11]||(t[11]=e=>ce.variedad.talla=e)},null,512),[[s.Jo,ce.variedad.talla]])]),(0,o.Lk)("div",q,[t[38]||(t[38]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("button",{class:"btn btn-primary btn-block",style:{width:"100% !important"},onClick:t[12]||(t[12]=e=>de.validar_variedad())},"Agregar")])]),t[43]||(t[43]=(0,o.Lk)("small",{class:"text-muted"}," Nota: Si hay unidades en el stock no se pueden eliminar la variedad ",-1)),(0,o.Lk)("div",W,[(0,o.Lk)("div",Q,[(0,o.Lk)("div",K,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(ce.variedades,(e=>((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",Z,[(0,o.Lk)("div",ee,[(0,o.Lk)("h4",te,(0,l.v_)(e.color.toUpperCase())+"-"+(0,l.v_)(e.talla.toUpperCase()),1),(0,o.Lk)("small",ae,(0,l.v_)(e.sku.toUpperCase()),1)]),t[39]||(t[39]=(0,o.Lk)("div",{class:"col-auto"}," Stock: ",-1)),(0,o.Lk)("div",oe,(0,l.v_)(e.stock),1),(0,o.Lk)("div",se,[0==e.stock?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-sm btn-danger",type:"button",onClick:t=>de.eliminar_variedad(e._id)}," Eliminar ",8,le)):(0,o.Q3)("",!0),e.stock>=1?((0,o.uX)(),(0,o.CE)("button",re," Eliminar ")):(0,o.Q3)("",!0)])])])))),256))])])])])])])])])])])}var ce=a(8554),de=a(786),ne=a(4335),pe={name:"editPoductoApp",components:{sideBar:ce.A,topNav:de.A},data(){return{str_img:"/assets/img/icon-ropa.jpg",producto:{genero:"",categoria:"",estado:!0,descuento:!1,portada:void 0},portada:void 0,variedad:{},variedades:[]}},methods:{init_data(){ne.A.get(this.$url+"/obtener_producto_admin/"+this.$route.params.id,{headers:{"Content-Type":"application/json",Authorization:this.$store.state.token}}).then((e=>{this.producto=e.data,this.str_img=this.$url+"/obtener_portada_producto/"+this.producto.portada}))},uploadImage(e){var t;e.target.files.length>=1&&(t=e.target.files[0]),t.size<=1e6?"image/jpg"==t.type||"image/png"==t.type||"image/webp"==t.type||"image/jpeg"==t.type?(this.str_img=URL.createObjectURL(t),this.portada=t,this.producto.portada=this.portada):(this.$notify({title:"ATENCIÓN",text:"Solo se admiten imagenes.",type:"warn"}),this.portada=void 0):(this.$notify({title:"ATENCIÓN",text:"La imagen no debe ser mayor a 1mb.",type:"warn"}),this.portada=void 0)},validar(){this.producto.nombre?this.producto.clave?this.producto.genero?this.producto.categoria?this.producto.descripcion?void 0==this.producto.portada?this.$notify({title:"ATENCIÓN",text:"Ingresa la imagen de portada",type:"error"}):this.actualizar():this.$notify({title:"ATENCIÓN",text:"Agrega una descripcion del producto",type:"error"}):this.$notify({title:"ATENCIÓN",text:"Selecciona una categoria",type:"error"}):this.$notify({title:"ATENCIÓN",text:"Selecciona el genero",type:"error"}):this.$notify({title:"ATENCIÓN",text:"Ingresa la clave de producto",type:"error"}):this.$notify({title:"ATENCIÓN",text:"Ingresa el nombre de producto",type:"error"})},actualizar(){const e=new FormData;e.append("nombre",this.producto.nombre),e.append("clave",this.producto.clave),e.append("genero",this.producto.genero),e.append("categoria",this.producto.categoria),e.append("descripcion",this.producto.descripcion),e.append("estado",this.producto.estado),e.append("descuento",this.producto.descuento),this.portada instanceof File&&e.append("portada",this.portada),ne.A.put(`${this.$url}/actualizar_producto_admin/${this.$route.params.id}`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:this.$store.state.token}}).then((e=>{this.$notify({title:"ÉXITO",text:"Producto actualizado correctamente",type:"success"}),this.$router.push({name:"index-producto"})})).catch((e=>{console.error("Error detallado:",e.response?.data),this.$notify({title:"ERROR",text:e.response?.data?.message||"Error al actualizar el producto",type:"error"})}))},validar_variedad(){this.variedad.color?this.variedad.talla?(this.variedad.producto=this.$route.params.id,this.variedad.sku=this.generar_sku(),this.registar_variedad()):this.$notify({title:"ATENCIÓN",text:"Agregar la talla",type:"warn"}):this.$notify({title:"ATENCIÓN",text:"Agregar el color",type:"warn"})},registar_variedad(){ne.A.post(this.$url+"/registro_variedad_producto",this.variedad,{headers:{"Content-Type":"application/json",Authorization:this.$store.state.token}}).then((e=>{this.variedad={},this.$notify({title:"SUCCESS",text:"Se agrego la variedad al producto",type:"success"}),this.init_variedades()}))},generar_sku(){let e=(this.producto.clave+"-"+this.variedad.color.substring(0,3)+"-"+this.variedad.talla.substring(0,2)).toUpperCase();return e},init_variedades(){ne.A.get(this.$url+"/obtener_variedades_producto/"+this.$route.params.id,{headers:{"Content-Type":"application/json",Authorization:this.$store.state.token}}).then((e=>{this.variedades=e.data}))},eliminar_variedad(e){ne.A.delete(this.$url+"/eliminar_variedades_producto/"+e,{headers:{"Content-Type":"application/json",Authorization:this.$store.state.token}}).then((e=>{e.data.message?this.$notify({title:"ERROR",text:e.data.message,type:"error"}):(this.$notify({title:"SUCCESS",text:"Se elimino la variedad",type:"success"}),this.init_variedades())}))}},beforeMount(){this.init_data(),this.init_variedades()}},ue=a(6262);const me=(0,ue.A)(pe,[["render",ie]]);var ve=me}}]);
//# sourceMappingURL=920.b15642a8.js.map